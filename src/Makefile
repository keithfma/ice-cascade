# Version info (auto-generated by svn):
## $LastChangedDate: 2014-05-10 10:30:33 -0400 (Sat, 10 May 2014) $
## $LastChangedBy: kfm $
## $LastChangedRevision: 97 $ 

FORT = mpif90
#FFLAGS = -m64 -c -fast -xHost -nogen-interfaces # run fast
FFLAGS = -m64 -c -g  # simple 
#FFLAGS = -m64 -c -g -check all -fpe0 -warn -traceback -debug extended # debug
DEFS = 
INCL = -I$(NETCDF_INCLUDE) -I$(INCLUDEDIR) 
LIBS = -L$(NETCDF_LIBRARY) -lnetcdff -lnetcdf -lfftw3 

SRC = \
types.f90 \
fftw3.f90 \
grid.f90 \
hill.f90 \
benchmark.f90 \
cascade.f90 \
ice.f90 \
io.f90 \
hillslope.f90 \
flexure.f90 \
uplift.f90 \
ice_cascade.f90 \

OBJ = $(patsubst %.f90, %.o, $(SRC))

ice_cascade: $(OBJ)
	$(FORT) $(LIBS) $^ -o ../ice-cascade

%.o %.mod: %.f90 	
	$(FORT) $(FFLAGS) $(DEFS) $(INCL) $< -o $@ 

.PHONY: clean	

clean:
	rm -f *.o *.mod ../ice-cascade
